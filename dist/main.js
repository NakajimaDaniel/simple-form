(()=>{function e(){document.getElementById("name-input").value.length<3?(document.getElementById("name-span").style.visibility="visible",document.getElementById("name-input").style.borderBottom="1px solid #EB4A46"):(document.getElementById("name-span").style.visibility="hidden",document.getElementById("name-input").style.borderBottom="1px solid #efeeed")}function t(){document.getElementById("email-input").validity.typeMismatch?(document.getElementById("email-span").style.visibility="visible",document.getElementById("email-input").style.borderBottom="1px solid #EB4A46"):(document.getElementById("email-span").style.visibility="hidden",document.getElementById("email-input").style.borderBottom="1px solid #efeeed")}function n(){document.getElementById("cpf-input").validity.patternMismatch?(document.getElementById("cpf-span").style.visibility="visible",document.getElementById("cpf-input").style.borderBottom="1px solid #EB4A46"):(document.getElementById("cpf-span").style.visibility="hidden",document.getElementById("cpf-input").style.borderBottom="1px solid #efeeed")}function d(){document.getElementById("number-input").validity.patternMismatch?(document.getElementById("number-span").style.visibility="visible",document.getElementById("number-input").style.borderBottom="1px solid #EB4A46"):(document.getElementById("number-span").style.visibility="hidden",document.getElementById("number-input").style.borderBottom="1px solid #efeeed")}document.addEventListener("DOMContentLoaded",(function(){document.getElementById("name-input").addEventListener("input",e),document.getElementById("email-input").addEventListener("input",t),document.getElementById("cpf-input").addEventListener("input",n),document.getElementById("number-input").addEventListener("input",d),document.getElementById("user-form").addEventListener("submit",(function(){!async function(e){e.preventDefault(),document.getElementById("submit-button");const t=document.getElementById("loading-ring"),n=document.getElementById("button-title");n.style.visibility="hidden",t.style.visibility="visible",async function(){const e=i.transaction("user","readwrite"),t=e.objectStore("user"),n=await async function(){const e=Date.now(),t=document.getElementById("name-input").value,n=document.getElementById("email-input").value,d=document.getElementById("cpf-input").value,i=document.getElementById("number-input").value,l=new Object;return l.id=e,l.name=t,l.email=n,l.cpf=d,l.phoneNumber=i,JSON.parse(JSON.stringify(l))}();t.add(n),e.onerror=()=>{alert("user and/or email already register")}}(),setTimeout((()=>{n.style.visibility="visible",t.style.visibility="hidden"}),2e3)}(event)}))}));let i=null;!function(){if(i)return;const e=indexedDB.open("simpleForm-db",1);e.onsuccess=e=>{i=e.target.result},e.onupgradeneeded=e=>{i=e.target.result;var t=i.createObjectStore("user",{keyPath:"id"});t.createIndex("name","name",{unique:!1}),t.createIndex("email","email",{unique:!0})}}(),document.addEventListener("DOMContentLoaded",(function(){!function(e){if(i)return void e();const t=indexedDB.open("simpleForm-db",1);t.onsuccess=t=>{i=t.target.result,e()},t.onupgradeneeded=e=>{i=e.target.result;var t=i.createObjectStore("user",{keyPath:"id"});t.createIndex("name","name",{unique:!1}),t.createIndex("email","email",{unique:!0})}}((()=>{i.transaction("user","readwrite").objectStore("user").getAll().onsuccess=e=>{!function(e){const t=document.getElementById("users-list");e.map((e=>{const n=document.createElement("div");t.appendChild(n),n.className=`user ${e.id}`;const d=document.createElement("div");n.appendChild(d),d.className="user-data";const l=document.createElement("span"),m=document.createTextNode(`Full name: ${e.name}`);d.appendChild(l),l.appendChild(m);const o=document.createElement("span"),u=document.createTextNode(`E-mail: ${e.email}`);d.appendChild(o),o.appendChild(u);const a=document.createElement("span"),s=document.createTextNode(`CPF: ${e.cpf}`);d.appendChild(a),a.appendChild(s);const c=document.createElement("span"),r=document.createTextNode(`Phone number: ${e.phoneNumber}`);d.appendChild(c),c.appendChild(r);const p=document.createElement("a"),y=document.createTextNode("x");p.appendChild(y),p.id=`delete-user ${e.id}`,n.appendChild(p),document.getElementById(`delete-user ${e.id}`).addEventListener("click",(function(){var t;t=e.id,i.transaction("user","readwrite").objectStore("user").delete(t).onsuccess=e=>{alert("User deleted")}}))}))}(e.target.result)}}))}))})();